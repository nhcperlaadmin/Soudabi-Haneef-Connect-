<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bengapadavu Ward 17 | Enmakaje GP Portal</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Manrope', sans-serif; -webkit-tap-highlight-color: transparent; }
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); }
        .active-tab { background-color: #059669; color: white; box-shadow: 0 10px 15px -3px rgba(5, 150, 105, 0.3); }
        .section-animate { animation: slideUp 0.4s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        input:focus, textarea:focus { border-color: #059669; ring: 2px; ring-color: #10b981; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 overflow-x-hidden">
    <div id="root"></div>

    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom": "https://esm.sh/react-dom@18.2.0/client",
    "@google/genai": "https://esm.sh/@google/genai@1.34.0",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "react-router-dom": "https://esm.sh/react-router-dom@^7.11.0",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>

    <script type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import ReactDOM from 'react-dom';
        import { GoogleGenAI } from '@google/genai';

        const App = () => {
            const [activeTab, setActiveTab] = useState('home');
            const [isChatOpen, setIsChatOpen] = useState(false);
            const [tickets, setTickets] = useState(() => JSON.parse(localStorage.getItem('ward17_tickets') || '[]'));

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [activeTab, isChatOpen]);

            const saveTicket = (newTicket) => {
                const updated = [newTicket, ...tickets];
                setTickets(updated);
                localStorage.setItem('ward17_tickets', JSON.stringify(updated));
            };

            return React.createElement('div', { className: 'min-h-screen lg:pl-72' },
                // Desktop Sidebar
                React.createElement('aside', { className: 'hidden lg:flex flex-col w-72 bg-emerald-950 text-white fixed h-full left-0 top-0 z-40 shadow-2xl' },
                    React.createElement('div', { className: 'p-8 border-b border-white/10' },
                        React.createElement('h1', { className: 'text-2xl font-black text-emerald-400 tracking-tight' }, 'BENGAPADAVU'),
                        React.createElement('p', { className: 'text-emerald-100/40 text-[10px] font-bold uppercase tracking-widest mt-1' }, 'Ward 17 • Enmakaje GP')
                    ),
                    React.createElement('nav', { className: 'flex-1 p-6 space-y-2' },
                        ['home', 'complaints', 'schemes', 'events', 'contact'].map(tab => 
                            React.createElement('button', {
                                key: tab,
                                onClick: () => setActiveTab(tab),
                                className: `w-full flex items-center gap-4 px-5 py-4 rounded-2xl transition-all ${activeTab === tab ? 'active-tab' : 'text-emerald-100/60 hover:bg-white/5 hover:text-white'}`
                            }, 
                                React.createElement('i', { 'data-lucide': getIcon(tab), className: 'w-5 h-5' }),
                                React.createElement('span', { className: 'font-bold capitalize' }, tab)
                            )
                        )
                    ),
                    React.createElement('div', { className: 'p-6' },
                        React.createElement('button', { onClick: () => setIsChatOpen(true), className: 'w-full py-4 bg-emerald-600/20 border border-emerald-500/30 rounded-2xl text-emerald-400 text-sm font-bold flex items-center justify-center gap-2 hover:bg-emerald-600 hover:text-white transition-all' },
                            React.createElement('i', { 'data-lucide': 'bot', className: 'w-4 h-4' }), 'Ward Mitra AI'
                        )
                    )
                ),

                // Mobile Header
                React.createElement('header', { className: 'lg:hidden sticky top-0 z-50 bg-emerald-950 text-white p-5 flex justify-between items-center shadow-lg' },
                    React.createElement('div', null,
                        React.createElement('h1', { className: 'font-black text-lg' }, 'Bengapadavu 17'),
                        React.createElement('p', { className: 'text-emerald-400 text-[10px] font-bold uppercase tracking-widest' }, 'Official Portal')
                    ),
                    React.createElement('button', { onClick: () => setIsChatOpen(true), className: 'bg-emerald-800 p-2.5 rounded-xl text-emerald-400 shadow-inner' },
                        React.createElement('i', { 'data-lucide': 'bot' })
                    )
                ),

                // Content Area
                React.createElement('main', { className: 'p-6 lg:p-12 max-w-5xl mx-auto pb-32 lg:pb-12' },
                    activeTab === 'home' && React.createElement(HomeView, { onAction: setActiveTab }),
                    activeTab === 'complaints' && React.createElement(ComplaintView, { tickets, onSave: saveTicket }),
                    activeTab === 'schemes' && React.createElement(SchemesView),
                    activeTab === 'events' && React.createElement(EventsView),
                    activeTab === 'contact' && React.createElement(ContactView)
                ),

                // Mobile Bottom Nav
                React.createElement('nav', { className: 'lg:hidden fixed bottom-6 left-6 right-6 glass border border-white/30 shadow-2xl rounded-[2.5rem] flex justify-around p-3 z-50' },
                    ['home', 'complaints', 'schemes', 'events', 'contact'].map(tab => 
                        React.createElement('button', {
                            key: tab,
                            onClick: () => setActiveTab(tab),
                            className: `p-3 rounded-2xl transition-all ${activeTab === tab ? 'bg-emerald-600 text-white scale-110 shadow-lg' : 'text-slate-400'}`
                        }, React.createElement('i', { 'data-lucide': getIcon(tab), className: 'w-6 h-6' }))
                    )
                ),

                // AI Chatbot
                isChatOpen && React.createElement(ChatBot, { close: () => setIsChatOpen(false) })
            );
        };

        const getIcon = (tab) => ({
            home: 'home',
            complaints: 'message-square',
            schemes: 'clipboard-list',
            events: 'calendar',
            contact: 'phone'
        }[tab]);

        const HomeView = ({ onAction }) => React.createElement('div', { className: 'space-y-10 section-animate' },
            React.createElement('div', { className: 'bg-emerald-900 rounded-[2.5rem] p-8 lg:p-14 text-white shadow-2xl relative overflow-hidden' },
                React.createElement('div', { className: 'relative z-10 max-w-2xl' },
                    React.createElement('span', { className: 'inline-block px-4 py-1.5 bg-emerald-800 text-emerald-300 rounded-full text-[10px] font-black uppercase tracking-widest mb-6' }, 'Ward Hub'),
                    React.createElement('h2', { className: 'text-4xl lg:text-6xl font-black mb-6 leading-tight' }, 'Building a Stronger ', React.createElement('span', { className: 'text-emerald-400' }, 'Ward 17')),
                    React.createElement('p', { className: 'text-emerald-100/60 text-lg mb-8' }, 'Empowering residents with digital access to local services, transparency, and instant communication.'),
                    React.createElement('div', { className: 'flex flex-wrap gap-4' },
                        React.createElement('button', { onClick: () => onAction('complaints'), className: 'bg-white text-emerald-950 px-8 py-4 rounded-2xl font-black shadow-xl hover:scale-105 transition-all flex items-center gap-3' }, 
                            React.createElement('i', { 'data-lucide': 'plus-circle' }), 'Register Grievance'
                        )
                    )
                ),
                React.createElement('div', { className: 'absolute -bottom-24 -right-24 w-96 h-96 bg-emerald-800/20 rounded-full blur-3xl' })
            ),
            React.createElement('div', { className: 'grid grid-cols-2 lg:grid-cols-4 gap-4' },
                [
                    { l: 'Schemes', i: 'clipboard-list', c: 'emerald', t: 'schemes' },
                    { l: 'Events', i: 'calendar', c: 'blue', t: 'events' },
                    { l: 'Track Work', i: 'search', c: 'amber', t: 'complaints' },
                    { l: 'Support', i: 'phone', c: 'purple', t: 'contact' }
                ].map(item => React.createElement('button', { 
                    key: item.l, 
                    onClick: () => onAction(item.t),
                    className: 'bg-white p-6 rounded-[2rem] border border-slate-200/50 shadow-sm hover:shadow-xl transition-all group flex flex-col items-center gap-3 text-center' 
                },
                    React.createElement('div', { className: `w-14 h-14 bg-${item.c}-50 text-${item.c}-600 rounded-2xl flex items-center justify-center group-hover:bg-${item.c}-600 group-hover:text-white transition-all` }, React.createElement('i', { 'data-lucide': item.i })),
                    React.createElement('span', { className: 'font-extrabold text-slate-800 text-[11px] uppercase tracking-tight' }, item.l)
                ))
            )
        );

        const ComplaintView = ({ tickets, onSave }) => {
            const [view, setView] = useState('menu');
            const [formData, setFormData] = useState({ name: '', phone: '', desc: '' });
            const [searchId, setSearchId] = useState('');
            const [searchResult, setSearchResult] = useState(null);

            const handleNew = (e) => {
                e.preventDefault();
                const id = 'CMP-' + Math.floor(10000 + Math.random() * 90000);
                onSave({ id, ...formData, date: new Date().toLocaleDateString(), status: 'Submitted' });
                alert('Complaint Registered! ID: ' + id);
                setView('menu');
            };

            const handleSearch = () => {
                const found = tickets.find(t => t.id === searchId.toUpperCase());
                setSearchResult(found || 'not_found');
            };

            return React.createElement('div', { className: 'section-animate space-y-8' },
                React.createElement('h2', { className: 'text-3xl font-black' }, 'Complaint Desk'),
                view === 'menu' && React.createElement('div', { className: 'grid md:grid-cols-2 gap-6' },
                    React.createElement('button', { onClick: () => setView('form'), className: 'bg-emerald-600 p-10 rounded-[2.5rem] text-white text-left shadow-xl hover:scale-[1.02] transition-all' },
                        React.createElement('i', { 'data-lucide': 'plus', className: 'w-12 h-12 mb-6' }),
                        React.createElement('h3', { className: 'text-2xl font-black' }, 'New Grievance'),
                        React.createElement('p', { className: 'opacity-70 mt-2 text-sm' }, 'Report local issues directly to the ward office.')
                    ),
                    React.createElement('button', { onClick: () => setView('track'), className: 'bg-white p-10 rounded-[2.5rem] text-left border border-slate-200 shadow-xl hover:scale-[1.02] transition-all' },
                        React.createElement('i', { 'data-lucide': 'search', className: 'w-12 h-12 text-emerald-600 mb-6' }),
                        React.createElement('h3', { className: 'text-2xl font-black' }, 'Track Status'),
                        React.createElement('p', { className: 'text-slate-400 mt-2 text-sm' }, 'Check the progress of your submitted complaints.')
                    )
                ),
                view === 'form' && React.createElement('div', { className: 'bg-white p-8 rounded-[2.5rem] border border-slate-200' },
                    React.createElement('button', { onClick: () => setView('menu'), className: 'text-emerald-600 font-bold mb-6 flex items-center gap-2' }, React.createElement('i', { 'data-lucide': 'arrow-left', className: 'w-4 h-4' }), 'Back'),
                    React.createElement('form', { onSubmit: handleNew, className: 'space-y-6' },
                        React.createElement('input', { required: true, placeholder: 'Resident Name', className: 'w-full p-4 bg-slate-50 rounded-xl border border-transparent focus:bg-white outline-none', onChange: e => setFormData({...formData, name: e.target.value}) }),
                        React.createElement('input', { required: true, type: 'tel', placeholder: 'Phone Number', className: 'w-full p-4 bg-slate-50 rounded-xl border border-transparent focus:bg-white outline-none', onChange: e => setFormData({...formData, phone: e.target.value}) }),
                        React.createElement('textarea', { required: true, placeholder: 'Describe the problem...', rows: 4, className: 'w-full p-4 bg-slate-50 rounded-xl border border-transparent focus:bg-white outline-none', onChange: e => setFormData({...formData, desc: e.target.value}) }),
                        React.createElement('button', { className: 'w-full bg-emerald-600 text-white font-black py-4 rounded-xl shadow-lg' }, 'Submit Complaint')
                    )
                ),
                view === 'track' && React.createElement('div', { className: 'bg-white p-8 rounded-[2.5rem] border border-slate-200 text-center' },
                    React.createElement('button', { onClick: () => setView('menu'), className: 'text-emerald-600 font-bold mb-6 flex items-center gap-2' }, React.createElement('i', { 'data-lucide': 'arrow-left', className: 'w-4 h-4' }), 'Back'),
                    React.createElement('input', { placeholder: 'Enter ID (CMP-XXXXX)', className: 'w-full p-4 bg-slate-50 rounded-xl mb-4 text-center font-bold tracking-widest', value: searchId, onChange: e => setSearchId(e.target.value.toUpperCase()) }),
                    React.createElement('button', { onClick: handleSearch, className: 'w-full bg-slate-900 text-white font-black py-4 rounded-xl mb-6 shadow-xl' }, 'Track Now'),
                    searchResult === 'not_found' && React.createElement('p', { className: 'text-red-500 font-bold' }, 'No record found with this ID.'),
                    searchResult && searchResult !== 'not_found' && React.createElement('div', { className: 'text-left p-6 bg-emerald-50 rounded-2xl border border-emerald-100' },
                        React.createElement('p', { className: 'text-xs font-black text-emerald-600 uppercase' }, 'Complaint Status'),
                        React.createElement('h4', { className: 'text-2xl font-black mt-1' }, searchResult.status),
                        React.createElement('div', { className: 'mt-4 space-y-2' },
                            React.createElement('p', { className: 'text-sm text-slate-600' }, React.createElement('b', null, 'Citizen: '), searchResult.name),
                            React.createElement('p', { className: 'text-sm text-slate-600' }, React.createElement('b', null, 'Date: '), searchResult.date),
                            React.createElement('p', { className: 'text-sm text-slate-600' }, React.createElement('b', null, 'Detail: '), searchResult.desc)
                        )
                    )
                )
            );
        };

        const SchemesView = () => React.createElement('div', { className: 'section-animate space-y-6' },
            React.createElement('h2', { className: 'text-3xl font-black' }, 'Welfare Schemes'),
            React.createElement('div', { className: 'grid md:grid-cols-2 gap-6' },
                [
                    { t: 'LIFE Mission Housing', c: 'Housing', d: 'Safe housing for landless homeless families.', e: 'BPL families with no land.' },
                    { t: 'MGNREGS Work Card', c: 'Employment', d: '100 days of guaranteed manual labor work.', e: 'Adult ward residents.' },
                    { t: 'Kudumbashree Grants', c: 'Women', d: 'Grants and loans for self-help groups.', e: 'Registered SHG members.' },
                    { t: 'Subhiksha Keralam', c: 'Farming', d: 'Subsidies for kitchen gardens and poultry.', e: 'Small scale farmers.' }
                ].map((s, idx) => React.createElement('div', { key: idx, className: 'bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm' },
                    React.createElement('span', { className: 'text-[10px] font-black text-emerald-600 uppercase tracking-widest' }, s.c),
                    React.createElement('h3', { className: 'text-xl font-black mt-2' }, s.t),
                    React.createElement('p', { className: 'text-sm text-slate-500 mt-3' }, s.d),
                    React.createElement('div', { className: 'mt-6 p-4 bg-slate-50 rounded-xl' }, 
                        React.createElement('p', { className: 'text-[10px] font-bold text-slate-400 uppercase mb-1' }, 'Eligibility'),
                        React.createElement('p', { className: 'text-xs font-bold text-slate-700' }, s.e)
                    )
                ))
            )
        );

        const EventsView = () => React.createElement('div', { className: 'section-animate space-y-6' },
            React.createElement('h2', { className: 'text-3xl font-black' }, 'Ward Calendar'),
            React.createElement('div', { className: 'space-y-4' },
                [{ d: '25', m: 'MAY', t: 'General Ward Sabha', l: 'Anganwadi 42', tm: '03:00 PM' }].map((e, idx) => 
                    React.createElement('div', { key: idx, className: 'bg-white p-6 rounded-[2rem] border border-slate-200 flex items-center gap-6' },
                        React.createElement('div', { className: 'text-center border-r border-slate-100 pr-6 shrink-0' },
                            React.createElement('p', { className: 'text-3xl font-black text-emerald-600 leading-none' }, e.d),
                            React.createElement('p', { className: 'text-[10px] font-bold uppercase text-slate-400' }, e.m)
                        ),
                        React.createElement('div', null,
                            React.createElement('h3', { className: 'font-black text-lg' }, e.t),
                            React.createElement('p', { className: 'text-xs text-slate-500 mt-1' }, `${e.l} • ${e.tm}`)
                        )
                    )
                )
            )
        );

        const ContactView = () => React.createElement('div', { className: 'max-w-xl mx-auto space-y-8 section-animate' },
            React.createElement('h2', { className: 'text-3xl font-black text-center' }, 'Connect with Us'),
            React.createElement('div', { className: 'bg-white p-10 rounded-[3rem] shadow-2xl border border-slate-200 space-y-6' },
                React.createElement('div', { className: 'text-center mb-8' },
                    React.createElement('div', { className: 'w-24 h-24 bg-emerald-100 rounded-full mx-auto mb-4 flex items-center justify-center text-emerald-600' }, React.createElement('i', { 'data-lucide': 'user', className: 'w-10 h-10' })),
                    React.createElement('h3', { className: 'text-2xl font-black' }, 'Shri. Rajesh Kumar'),
                    React.createElement('p', { className: 'text-emerald-600 font-bold uppercase text-[10px] tracking-widest' }, 'Ward Member - Ward 17')
                ),
                React.createElement('div', { className: 'space-y-3' },
                    React.createElement('a', { href: 'https://wa.me/919847012345', className: 'flex items-center gap-4 p-5 bg-emerald-50 text-emerald-700 rounded-3xl font-bold hover:bg-emerald-100 transition-colors' },
                        React.createElement('i', { 'data-lucide': 'message-circle' }), 'WhatsApp Message'
                    ),
                    React.createElement('a', { href: 'tel:+919847012345', className: 'flex items-center gap-4 p-5 bg-slate-50 text-slate-700 rounded-3xl font-bold hover:bg-slate-100 transition-colors' },
                        React.createElement('i', { 'data-lucide': 'phone' }), 'Direct Call'
                    )
                )
            )
        );

        const ChatBot = ({ close }) => {
            const [input, setInput] = useState('');
            const [messages, setMessages] = useState([{ role: 'bot', text: 'Namaskaram! I am Ward Mitra. Ask me anything about Ward 17 Bengapadavu.' }]);
            const [loading, setLoading] = useState(false);
            const scrollRef = useRef();

            useEffect(() => {
                if (scrollRef.current) scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
            }, [messages]);

            const handleSend = async () => {
                if (!input.trim()) return;
                const txt = input; setInput('');
                setMessages(prev => [...prev, { role: 'user', text: txt }]);
                setLoading(true);
                try {
                    const ai = new GoogleGenAI({ apiKey: window.process?.env?.API_KEY || '' });
                    const res = await ai.models.generateContent({
                        model: 'gemini-3-flash-preview',
                        contents: txt,
                        config: { systemInstruction: "Helpful assistant for Bengapadavu Ward 17, Enmakaje, Kerala. Answer about schemes, roads, and ward member help." }
                    });
                    setMessages(prev => [...prev, { role: 'bot', text: res.text }]);
                } catch (e) {
                    setMessages(prev => [...prev, { role: 'bot', text: "Service busy. Please contact the Ward Member directly via WhatsApp." }]);
                }
                setLoading(false);
            };

            return React.createElement('div', { className: 'fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm p-4 lg:p-10 flex flex-col' },
                React.createElement('div', { className: 'bg-white w-full max-w-2xl mx-auto rounded-[2.5rem] flex-1 flex flex-col overflow-hidden shadow-2xl' },
                    React.createElement('div', { className: 'p-6 bg-emerald-950 text-white flex justify-between items-center' },
                        React.createElement('div', null, React.createElement('h3', { className: 'font-black' }, 'Ward Mitra AI'), React.createElement('p', { className: 'text-[10px] text-emerald-400 font-bold uppercase' }, 'Resident Assistant')),
                        React.createElement('button', { onClick: close, className: 'p-2 hover:bg-white/10 rounded-full' }, React.createElement('i', { 'data-lucide': 'x' }))
                    ),
                    React.createElement('div', { ref: scrollRef, className: 'flex-1 overflow-y-auto p-6 space-y-4 no-scrollbar' },
                        messages.map((m, i) => React.createElement('div', { key: i, className: `flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}` },
                            React.createElement('div', { className: `max-w-[85%] p-4 rounded-3xl ${m.role === 'user' ? 'bg-emerald-600 text-white rounded-tr-none' : 'bg-slate-100 text-slate-800 rounded-tl-none'} text-sm font-medium leading-relaxed` }, m.text)
                        )),
                        loading && React.createElement('div', { className: 'text-slate-400 text-xs italic ml-2' }, 'Ward Mitra is typing...')
                    ),
                    React.createElement('div', { className: 'p-6 bg-slate-50 border-t border-slate-100' },
                        React.createElement('div', { className: 'relative flex gap-2' },
                            React.createElement('input', { value: input, onChange: e => setInput(e.target.value), onKeyDown: e => e.key === 'Enter' && handleSend(), placeholder: 'Ask about LIFE Mission...', className: 'flex-1 py-4 px-6 rounded-2xl bg-white border border-slate-200 outline-none focus:border-emerald-500 font-medium' }),
                            React.createElement('button', { onClick: handleSend, className: 'p-4 bg-emerald-600 text-white rounded-2xl shadow-lg' }, React.createElement('i', { 'data-lucide': 'send', className: 'w-5 h-5' }))
                        )
                    )
                )
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>